<!DOCTYPE html>
<html lang="pt">
	<head>
		<meta charset="utf-8" />
		<title>Aula.11.02 - Dados para gráficos #1</title>
		<style>
		</style>
		<script src="../Recursos/jQuery/jquery-3.3.1.min.js"></script>
		<script>
			var amplitCab = {
				width: 50
			};
			var estiloCab = {
				font:"bold 14px arial", textAlign:"right",
				backgroundColor: "#800", color: "#fff" 
			};
			var amplitCel = {

			};
			var estiloCel = {
				font:"bold 14px verdana", textAlign:"right",
				backgroundColor: "#fca", color: "#800" 
			};
			var dados1=[
				["pais","qtd"],
				{pais:"PT", qtd:120},
				{pais:"ES", qtd:135},
				{pais:"FR", qtd:70},
				{pais:"IT", qtd:125},
				{pais:"GB", qtd:30},
				{pais:"DE", qtd:40},
				{pais:"NL", qtd:10}
			];
			//detalhes de receitas de um determinado ano (milhares de euros)
			var detalhes=[
				["mes", "laranja", "banana", "kiwi"],
				{mes:1, laranja:150, banana:50, kiwi:37}, 
				{mes:2, laranja:120, banana:40, kiwi:59}, 
				{mes:3, laranja:100, banana:60, kiwi:49}, 
				{mes:4, laranja:100, banana:60, kiwi:42}, 
				{mes:5, laranja:115, banana:50, kiwi:50}, 
				{mes:6, laranja:130, banana:80, kiwi:31}, 
				{mes:7, laranja:150, banana:110, kiwi:45}, 
				{mes:8, laranja:150, banana:140, kiwi:55}, 
				{mes:9, laranja:150, banana:140, kiwi:60}, 
				{mes:10, laranja:150, banana:130, kiwi:60}, 
				{mes:11, laranja:120, banana:100, kiwi:103}, 
				{mes:12, laranja:100, banana:100, kiwi:61}
			];
			function inic(){
				var dct1 = dadosColTab(detalhes, 2);
				document.write(dct1.nome);
				document.write("<hr />");
				mostraArray(dct1.etiqs);
				mostraArray(dct1.vals);
				mostraArray(dct1.max);
				document.write("<hr />");
			}

			//descodificação da tabela detalhes
			function descodDetalhes(){
				var NMES = ["janeiro", "fevereiro", "março", "abril", "maio", "junho", "julho", "agosto", "setembro", "outubro", "novembro", "dezembro"];
				var i, nLins = detalhes.length;
				for(i = 0; i < nLins; i++)	
					detalhes[i].mes = NMES[detalhes[i].mes-1];
			}

			//gera um objeto de dados, na morma {nome, etiqs, vals, max}, de fuma coluna (referida pelo seu índice) de uma variável-tabela quantitativa, com caráter de dupla entrada, com o nome da relação, a lista das etiquetas, a lista de valores e o valor máximo (assumindo que o primeiro elemento da variável-tabela já é o array de nomes das propriedades)
			function dadosColTab(varTab, numCol){
				var i, nLins = varTab.length, dct = {};
				dct.nome = varTab[0][numCol] + "/" + varTab[0][0];
				dct.etiqs = []; dct.vals = []; dct.max = -Number.MAX_VALUE;
				for(i = 1; i <= nLins; i++){
					dct.etiqs[i-1] = varTab[i][varTab[0][0]];
					dct.vals[i-1] = varTab[i][varTab[0][numCol]];
					if(dct.vals[i-1] > dct.max)
						dct.max = dct.vals[i-1];
				}

				return dct;
			}
			//mostra os elementos de um array
			function mostraArray(array){
				var i, n = array.length;
				for(i = 0; i < n; i++)
					document.write(array[i] + '<br />');
				document.write("<hr />");

			}

			
		</script>
	</head>
	<body>
		<script>
			inic();
		</script>
	</body>
</html>
